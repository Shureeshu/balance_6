{% extends 'base.html' %}

{% block content %}
  {% if request.user.is_authenticated %}
    <form action="{% url 'accounts:logout' %}" method="POST">
      {% csrf_token %}
      <input type="submit" value="로그아웃">
    </form>
  {% else %}
    <a href="{% url 'accounts:signup' %}">회원가입</a>
    <a href="{% url 'accounts:login' %}">로그인</a>
  {% endif %}
  <a href="{% url 'posts:create' %}">생성하기</a>
  <hr>
  <ul>
    {% for post in posts %}
      <li>{{ post.pk }} - 
        <a href="{% url 'posts:detail' post.pk %}">{{ post.title }}</a>
        (작성자: <a href="{% url 'accounts:profile' post.user.username %}">{{ post.user }}</a> /
        {% if request.user in post.like_users.all %}
        ❤ {{ post.like_users.all|length }}
        {% else %}
        🤍 {{ post.like_users.all|length }}
        {% endif %}
        )
      </li>

    {% endfor %}
  </ul>
{% endblock content %}